
!> \mainpage Numerical analysis main page
!>
!> Most of the functions for numerical analysis are in the \ref numa module.
!>
!> The source code is hosted on github:
!>
!> https://github.com/JeffIrwin/numerical-analysis
!>
!> This documentation is automatically generated by Doxygen.
!>

!===============================================================================

#include "panic.F90"

!> Main public-facing module for numerical analysis
module numa

	use numa__blarg
	use numa__core
	use numa__eig
	use numa__fit
	use numa__integrate
	use numa__interp
	use numa__linalg
	use numa__linprog
	use numa__opt
	use numa__roots
	use numa__utils

	implicit none

	! TODO:
	!
	! - split up large files
	!   * linalg.F90 and associated chapter 4 tests are both long enough that
	!     they could be split further
	!   * consider using submodules to avoid recompilation cascades.  see
	!     syntran's use of submodules in parse.f90 for example
	!   * maybe rename chapter_* to reflect what they test rather than arbitrary
	!     chapter numbers
	! - Add more doxygen doc strings, maybe at least just a `brief` for each
	!   public fn.  See `lagrange_interpolator()` which has an example doc
	!   string
	! - Make a few more examples for interesting cases. Doesn't need to be
	!   exhaustive, that's what the tests are for

	!********

	! Note on compiler support:
	!
	! GNU gfortran and Intel ifx both work well and are tested in ci/cd.
	!
	! NVIDIA nvfortran almost works.  NVIDIA is picky and requires explicit
	! allocation sometimes instead of automatically re-allocating the LHS based
	! on the RHS.  See the note in chapter 4.  If that workaround is implemented
	! in other places, nvfortran might work.  It compiles and gets through some
	! tests before eventually segfaulting
	!
	! Lfortran does not work as of 2025-09-07, because it lacks at least
	! iso_fortran_env.  I tried removing uses of iso_fortran_env, but there were
	! other issues that I can't remember

	integer, parameter :: &
		NUMA_MAJOR = 0, &
		NUMA_MINOR = 1, &
		NUMA_PATCH = 0

contains

!===============================================================================

subroutine print_version(unit)
	use iso_fortran_env
	integer, optional, intent(in) :: unit
	!********
	integer :: unit_

	unit_ = output_unit
	if (present(unit)) unit_ = unit

	write(unit_, "(a)") " numa version " // &
		to_str(NUMA_MAJOR) // "." // &
		to_str(NUMA_MINOR) // "." // &
		to_str(NUMA_PATCH)

end subroutine print_version

!===============================================================================

end module numa

